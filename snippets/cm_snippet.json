{
  "CM Snippet": {
    "prefix": "cm",
    "body": [
      "{",
      "  \"${TM_FILENAME_BASE}\": {",
      "    \"send\": {",
      "      \"destNode\": \"\",",
      "      \"destHost\": \"@CONFIG.custom.\",",
      "      \"protocol\": \"@CONFIG.custom.\",",
      "      \"redirectURL\": \"'@CONFIG.custom.'\",",
      "      \"method\": \"\",",
      "      \"contentType\": \"@CONFIG.custom.\",",
      "      \"timeout\": \"10\",",
      "      \"retryLimit\": \"0\",",
      "      \"setParameter\": [",
      "        {",
      "          \"@PARAM.header\": {",
      "            \"content-Type\": \"application/json\"",
      "          }",
      "        },",
      "        {",
      "          \"@PARAM.body\": {",
      "          }",
      "        }",
      "      ],",
      "      \"header\": \"@PARAM.header\",",
      "      \"body\": \"@PARAM.body\"",
      "    },",
      "    \"received\": {",
      "      \"setParameter\": [",
      "        {",
      "          \"@PARAM.commonResult\": {",
      "            \"status\": 200,",
      "            \"resultCode\": \"20000\",",
      "            \"resultDesc\": \"Success\"",
      "          },",
      "          \"criteria\": {",
      "            \"action\": \"custom\",",
      "            \"value\": \"'@RES.${TM_FILENAME_BASE}.body.resultCode' == 20000\"",
      "          }",
      "        },",
      "        {",
      "          \"@PARAM.commonResult\": {",
      "            \"status\": 500,",
      "            \"resultCode\": \"50002\",",
      "            \"resultDesc\": \"Connection timeout\",",
      "            \"errorType\": \"common\"",
      "          },",
      "          \"criteria\": {",
      "            \"action\": \"custom\",",
      "            \"value\": \"'@RES.${TM_FILENAME_BASE}.statusCode' == 504 && '@RES.${TM_FILENAME_BASE}.appCodeError' == '50400' && '@RES.${TM_FILENAME_BASE}.appMessageError' == 'ETIMEOUT'\"",
      "          }",
      "        },",
      "        {",
      "          \"@PARAM.commonResult\": {",
      "            \"status\": 401,",
      "            \"resultCode\": \"40101\",",
      "            \"resultDesc\": \"Access denied\",",
      "            \"errorType\": \"common\"",
      "          },",
      "          \"criteria\": {",
      "            \"action\": \"custom\",",
      "            \"value\": \"'@RES.${TM_FILENAME_BASE}.statusCode' == 403 && '@RES.${TM_FILENAME_BASE}.appCodeError' == '40300' && '@RES.${TM_FILENAME_BASE}.appMessageError' == 'EMANDATORY'\"",
      "          }",
      "        }",
      "      ],",
      "      \"contentType\": \"application/json\",",
      "      \"verify\": {",
      "        \"mandatory\": {",
      "          \"body\": []",
      "        }",
      "      },",
      "      \"variable\": {",
      "        \"@VAR.commonResult\": \"@PARAM.commonResult\"",
      "      },",
      "      \"conditionResponse\": {",
      "        \"verifySuccess\": {",
      "          \"stat\": \"@STAT.suc\",",
      "          \"redirectStep\": \"#main\"",
      "        },",
      "        \"verifyError\": {",
      "          \"verifyConnection\": {",
      "            \"connectionError\": {",
      "              \"stat\": \"@STAT.err\",",
      "              \"redirectStep\": \"@TABLE.condition.cd_mapModelResponse.modelResponse\"",
      "            },",
      "            \"connectionTimeout\": {",
      "              \"stat\": \"@STAT.err\",",
      "              \"redirectStep\": \"@TABLE.condition.cd_mapModelResponse.modelResponse\"",
      "            }",
      "          },",
      "          \"else\": {",
      "            \"stat\": \"@STAT.err\",",
      "            \"redirectStep\": \"@TABLE.condition.cd_mapModelResponse.modelResponse\"",
      "          }",
      "        }",
      "      }",
      "    }",
      "  }",
      "}"
    ],
    "description": "Inserts a JSON block for CM"
  }
}
